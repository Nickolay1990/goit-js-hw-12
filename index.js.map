{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const DOM_NAVIGATION = {\n  galleryList: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  showMoreButton: document.querySelector('[data-showMoreButton]'),\n  form: document.querySelector('.form'),\n};\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  navText: ['<', '>'],\n  captionsData: 'alt',\n  captionDelay: '250',\n});\n\nexport function createGallery(images) {\n  const markUp = images\n    .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n      return `\n                <li class=\"card\">\n                    <a href=\"${largeImageURL}\">\n                        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"card-pic\"/>\n                        <ul class=\"inner-list\">\n                            <li class=\"inner-item\">\n                                <span class=\"bold\">Likes</span>${likes}\n                            </li>\n                            <li class=\"inner-item\">\n                                <span class=\"bold\">Views</span>${views}\n                            </li>\n                            <li class=\"inner-item\">\n                                <span class=\"bold\">Comments</span>${comments}\n                            </li>\n                            <li class=\"inner-item\">\n                                <span class=\"bold\">Downloads</span>${downloads}\n                            </li>\n                        </ul>\n                    </a>\n                </li>`;\n    })\n    .join('');\n  DOM_NAVIGATION.galleryList.insertAdjacentHTML('beforeend', markUp);\n  gallery.refresh();\n}\n\nexport function clearGallery() {\n  DOM_NAVIGATION.galleryList.innerHTML = '';\n}\n\nexport function showLoader() {\n  DOM_NAVIGATION.loader.style.display = 'block';\n}\n\nexport function hideLoader() {\n  DOM_NAVIGATION.loader.style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n  DOM_NAVIGATION.showMoreButton.classList.remove('visually-hidden');\n}\n\nexport function hideLoadMoreButton() {\n  DOM_NAVIGATION.showMoreButton.classList.add('visually-hidden');\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const params = {\n  key: '49539312-1d6717d33bfa63c1c4ab44e48',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 15,\n};\n\nexport async function getImagesByQuery(query, page) {\n  params.q = query;\n  params.page = page;\n\n  const response = await axios({\n    url: `https://pixabay.com/api/?${new URLSearchParams(params)}`,\n  });\n  return response.data;\n}\n\nexport function showError(message, color) {\n  iziToast.show({\n    message: `${message}`,\n    messageColor: '#ffffff',\n    messageSize: '16px',\n    backgroundColor: `#${color}`,\n    iconUrl: './Group.png',\n    position: 'topRight',\n    width: '300px',\n  });\n}\n","import * as render from './js/render-functions';\nimport { DOM_NAVIGATION } from './js/render-functions';\nimport { showError, params, getImagesByQuery } from './js/pixabay-api';\n\nconst fetchData = { page: 1, searchData: '' };\n\nDOM_NAVIGATION.form.addEventListener('submit', submitHandler);\nDOM_NAVIGATION.showMoreButton.addEventListener('click', showMoreHandler);\n\nfunction submitHandler(event) {\n  event.preventDefault();\n  fetchData.searchData = this.elements['search-text'].value.trim();\n  resetSearcher();\n  if (!fetchData.searchData) {\n    showError('Enter correct data, please', 'f6f932');\n    return;\n  }\n  requestExecutor();\n}\n\nasync function requestExecutor() {\n  render.showLoader();\n  try {\n    const response = await getImagesByQuery(fetchData.searchData, fetchData.page);\n    checkData(response.totalHits);\n    render.createGallery(response.hits);\n    checkMore(response);\n  } catch (error) {\n    if (error.message === 'no item') {\n      return;\n    }\n    showError(`${error.message}`, 'e83b08');\n  } finally {\n    render.hideLoader();\n  }\n}\n\nasync function showMoreHandler() {\n  render.hideLoadMoreButton();\n  render.showLoader();\n  fetchData.page++;\n  try {\n    const response = await getImagesByQuery(fetchData.searchData, fetchData.page);\n    render.createGallery(response.hits);\n    checkMore(response);\n    scrollPage();\n  } catch (error) {\n    showError(`${error.message}`, 'e83b08');\n  } finally {\n    render.hideLoader();\n  }\n}\n\nfunction scrollPage() {\n  const height = DOM_NAVIGATION.galleryList.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction resetSearcher() {\n  render.hideLoadMoreButton();\n  render.clearGallery();\n  fetchData.page = 1;\n  DOM_NAVIGATION.form.reset();\n}\n\nfunction checkData(data) {\n  if (!data) {\n    showError('Sorry, there are no images matching your search query. Please try again!', 'c08e2b');\n    render.hideLoader();\n    throw new Error('no item');\n  }\n}\n\nfunction checkMore(response) {\n  if (Math.ceil(response.totalHits / params.per_page) === fetchData.page) {\n    showError(\"We're sorry, but you've reached the end of search results.\", '0e9c79');\n    return;\n  }\n  render.showLoadMoreButton();\n}\n"],"names":["DOM_NAVIGATION","gallery","SimpleLightbox","createGallery","images","markUp","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","params","getImagesByQuery","query","page","axios","showError","message","color","iziToast","fetchData","submitHandler","showMoreHandler","event","resetSearcher","requestExecutor","render.showLoader","response","checkData","render.createGallery","checkMore","error","render.hideLoader","render.hideLoadMoreButton","scrollPage","height","render.clearGallery","data","render.showLoadMoreButton"],"mappings":"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"}